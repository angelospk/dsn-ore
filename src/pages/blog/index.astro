---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";
import { BASE_URL } from "../../consts";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
const base = BASE_URL === "/" ? "" : BASE_URL;
---

<BaseLayout
	title="Νέα & Ανακοινώσεις"
	description="Όλα τα τελευταία νέα και οι δράσεις του ΔΣ Νέων Ορεστιάδας."
>
	<section class="blog-index">
		<div class="container">
			<h1 class="section-title fade-in">Νέα & Ανακοινώσεις</h1>
			<p class="section-subtitle fade-in">
				Διαβάστε για τις δράσεις και τις πρωτοβουλίες μας
			</p>

			<div class="news-grid">
				{
					posts.map((post) => (
						<a
							href={`${base}/blog/${post.id}/`}
							class="news-card fade-in"
							style="text-decoration: none;"
						>
							<div class="news-content">
								<div class="news-date">
									<FormattedDate date={post.data.pubDate} />
								</div>
								<h3 class="news-title">{post.data.title}</h3>
								<p class="news-excerpt">
									{post.data.description}
								</p>
							</div>
						</a>
					))
				}
			</div>
		</div>
	</section>

	<style>
		.blog-index {
			padding: 8rem 0 4rem;
			min-height: 100vh;
			background: var(--bg-color);
		}

		.news-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
			gap: 2rem;
			margin-top: 3rem;
		}

		.news-card {
			background: var(--card-bg);
			border-radius: 16px;
			overflow: hidden;
			border: 1px solid var(--card-border);
			transition: all 0.4s;
			cursor: pointer;
			display: block;
			animation: fadeInUp 0.6s ease forwards;
			opacity: 0;
		}

		.news-card:hover {
			transform: translateY(-8px);
			border-color: #3b82f6;
			box-shadow: var(--card-shadow);
		}

		.news-content {
			padding: 2rem;
		}

		.news-date {
			color: #60a5fa;
			font-size: 0.9rem;
			margin-bottom: 0.5rem;
		}

		.news-title {
			font-size: 1.5rem;
			margin-bottom: 1rem;
			color: var(--text-color);
		}

		.news-excerpt {
			color: var(--text-muted);
			line-height: 1.6;
		}
	</style>
</BaseLayout>
